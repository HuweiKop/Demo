Demo
====


架构分层简介
DAL层：
负责与数据库交互，该层为最底层
BLL层：
负责主要业务逻辑处理，该层会调用DAL层
BLLCommon层：
负责通用业务逻辑处理，该层会调用DAL层
RET层（UI）
负责获取前台数据，调用BLL或BLLCommon层，得到结果返回给前端展现。
Contract层：
BLL的接口，使程序不依赖具体实现，依赖接口，满足依赖倒置原则。
Model层：
程序业务模型。
Common层：
程序通用方法。
Core.Cache层：
缓存功能。
Core.Log层：
日志功能。
Core.Service层：
业务逻辑的工厂，实现依赖注入，并通过AOP来记录异常日志。
Web层：
前端辅助类。

架构特点：
1.	DAL层中DbcontextBase类是所有Entity Framework方式的底层通用交互数据库方法，业务逻辑层中调用的方法都来自于此，这一层抽象的意义在于，如果用户要更改修改数据库的方式，可以只在底层修改，业务逻辑层不受干扰。例如，用户现在要把现有逻辑中的删除数据方式更改为假删除，即添加标记位，将要删除的数据标记为已删除，这样只需要更改Delete方法就可以了，不会影响业务逻辑层。
2.	BLLCommon层中的导入导出功能，调用的是拼接sql语句的方式来访问数据库，因为这里需要比较灵活，因此采用sql的方式。这里为导入导出会配备一个配置文件，可以通过更改配置文件来达到符合的导入导出格式。这样增加了灵活性，不必为每一个表格的导入导出编写一套程序了。
3.	业务逻辑层BLL中每一个实现类都需要在Contract中对应一个接口，目的是可以在Service层中通过工厂实现依赖注入。达到依赖抽象，不依赖实现的依赖倒置原则。
4.	依赖注入后，通过Cache层，用httpcontext来缓存业务逻辑对象，一次来避免每次new对象时导致的内容使用增加。
5.	在得到业务逻辑对象后，Service层还对该对象做了一个代理，实现AOP的效果，以此可以来通过Log层实现抓取异常日志。
6.	Web层中，ServiceContext和ControllerBase实现业务逻辑对象缓存。
7.	在Web层中还可以添加自定义Html功能扩展，例如Select控件。
8.	UI中对调用方法都有session以及权限检测，防止直接访问url以及没有有关权限的强制访问。
